"use strict";(self["webpackChunkpure_vue"]=self["webpackChunkpure_vue"]||[]).push([[534],{5378:function(a,t,i){i.r(t),i.d(t,{default:function(){return g}});var e=i(3396),d=i(6824);const s=["src"];function n(a,t,i,n,o,r){return(0,e.wg)(),(0,e.j4)(d.o,{justify:"center"},{default:(0,e.w5)((()=>[(0,e._)("div",null,[o.preview?((0,e.wg)(),(0,e.iD)("iframe",{key:0,src:o.base_64,ref:"pdfIframe"},null,8,s)):(0,e.kq)("",!0)])])),_:1})}i(560);var o=i(2492),r=i.n(o),h=i(9654),u=i(5479),c={data(){return{preview:!1,base_64:"",dataLoad:[],dataSign:[]}},async mounted(){this.dataSign=await h.Z.dataSign();let a=[];if(this.$route.query.param2){const{data:t}=await h.Z.getDataQrCode(this.$route.query.param1,this.$route.query.param2);if("not found"===t.msg)this.showAlert("error","Certificate Not Found !!");else{t.data[0].sign=!0,this.dataLoad=t.data[0],a.push({prefix:this.dataLoad.prefix,name:this.dataLoad.name});const i="TH"===this.dataLoad.language?"th":"eng";this.dataSign.forEach((a=>{a.id===this.dataLoad.sign_add_id&&(this.dataLoad.add_name=a[`name_${i}`],this.dataLoad.add_position=a[`position_${i}`],this.dataLoad[`base64_sign_add_${i}`]=a[`base64_sign_${i}`])})),await this.createPDF(this.dataLoad,a),this.preview=!0}}else{const{data:a}=await h.Z.dataInPjcode(this.$route.query.param1);this.dataLoad=a.data;const t=this.dataLoad[0].sign_add_id-1,i="TH"===this.dataLoad[0].language?"th":"eng";this.dataLoad.forEach((a=>{a.add_name=this.dataSign[t][`name_${i}`],a.add_position=this.dataSign[t][`position_${i}`],a[`base64_sign_add_${i}`]=this.dataSign[t][`base64_sign_${i}`]})),await this.createPDF(this.dataLoad[0],this.dataLoad),this.preview=!0}},methods:{showAlert(a,t){r().fire({position:"center",icon:a,title:t,showConfirmButton:!1,allowOutsideClick:!1})},async createPDF(a,t){const i=await u.Z.certification_pdf(t,a);this.base_64=i,i.getDataUrl((a=>{this.base_64=a;const t=this.$refs.pdfIframe;t.src=a,t.style.width=`${window.innerWidth}px`,t.style.height=`${window.innerHeight}px`}))}}},_=i(89);const f=(0,_.Z)(c,[["render",n]]);var g=f}}]);